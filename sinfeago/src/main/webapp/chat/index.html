<html>
<head>
<script src="https://cdn.firebase.com/js/client/2.2.1/firebase.js"></script>
<script
	src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'></script>
<link rel="stylesheet" type="text/css" href="../css/chat.css">
<!-- Bootstrap Core CSS -->
<link href="../css/bootstrap.min.css" rel="stylesheet">

<!-- Custom Fonts -->
<link
	href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css"
	rel="stylesheet" type="text/css">
<link
	href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic'
	rel='stylesheet' type='text/css'>
<link
	href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800'
	rel='stylesheet' type='text/css'>

<link rel="stylesheet" href="libs/index.css">
<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
<script src="../js/desativaBotaoDireitoMouse.js"></script>
<script src="../js/chat.js"></script>
<script src="../js/validaChat.js"></script>

<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>

</head>

<body onload="valida()">
	<div id="fundo-externo">
		<div id="fundo">
			<img src="../img/chat.jpg" alt="" />
		</div>
	</div>

	<div id="site">
		<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
			<div class="container-fluid">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header page-scroll">
					<button type="button" class="navbar-toggle" data-toggle="collapse"
						data-target="#bs-example-navbar-collapse-1">
						<span class="sr-only">Toggle navigation</span> <span
							class="icon-bar"></span> <span class="icon-bar"></span> <span
							class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="../">Início</a>
				</div>

				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse"
					id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav navbar-right">

						<li><a href="../pcrja/">#PCRjá</a></li>
						<li><a href="../pcrja/shop/"><span
								class="glyphicon glyphicon-star-empty" aria-hidden="true"></span>Camisetas</a></li>
						<li><a href="../noticias/">Notícias</a></li>
						<li><a href="../juridico/">Assessoria jurídica</a></li>
						<li><a href="../financeiro/">Financeiro</a></li>
						<li><a href="../forum/">Fórum</a></li>
						<li><a href="../sobre/">Quem somos</a></li>
						<li><a href="../secure/"><span
								class="glyphicon glyphicon-lock" aria-hidden="true"></span>
								Acesso restrito</a></li>
					</ul>
				</div>
				<!-- /.navbar-collapse -->
			</div>
			<!-- /.container -->
		</nav>
		<br>
		<center>
			<img src="../img/logo300cinza.png" />
		</center>
		<!-- CHAT MARKUP -->
		<div class="example-chat l-demo-container">
			<header>Bate-papo</header>
			<div class='example-chat-toolbar'>
				<label for="nameInput">Usuário:</label> <input type='text'
					id='nameInput' placeholder='digite um nome de usuário...'>
			</div>

			<ul id='example-messages' class="example-chat-messages"></ul>

			<footer>
				<input type='text' id='messageInput'
					placeholder='Escreva uma mensagem...'>
			</footer>
		</div>

		<!-- CHAT JAVACRIPT -->
		<script>
			// CREATE A REFERENCE TO FIREBASE
			var messagesRef = new Firebase('https://sinfeago.firebaseio.com/');

			// REGISTER DOM ELEMENTS
			var messageField = $('#messageInput');
			var nameField = $('#nameInput');
			var messageList = $('#example-messages');

			// LISTEN FOR KEYPRESS EVENT
			messageField.keypress(function(e) {
				if (e.keyCode == 13) {
					//FIELD VALUES
					var username = nameField.val();
					var message = messageField.val();

					//SAVE DATA TO FIREBASE AND EMPTY FIELD
					messagesRef.push({
						name : username,
						text : message
					});
					messageField.val('');
				}
			});

			// Add a callback that is triggered for each chat message.
			messagesRef
					.limitToLast(10)
					.on(
							'child_added',
							function(snapshot) {
								//GET DATA
								var data = snapshot.val();
								var username = data.name || "anonymous";
								var message = data.text;

								//CREATE ELEMENTS MESSAGE & SANITIZE TEXT
								var messageElement = $("<li>");
								var nameElement = $("<strong class='example-chat-username'></strong>")
								nameElement.text(username);
								messageElement.text(message).prepend(
										nameElement);

								//ADD MESSAGE
								messageList.append(messageElement)

								//SCROLL TO BOTTOM OF MESSAGE LIST
								messageList[0].scrollTop = messageList[0].scrollHeight;
							});
		</script>
</body>
</html>